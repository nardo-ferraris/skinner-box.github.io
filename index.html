<!doctype html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>La Gabbia Invisibile</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Archivo+Black&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f8f7f2; --ink:#161616; --muted:#575757; --card:#fff;
      --accent:#ff5e3a; --accent2:#08a88f; --line:#222;
      --radius:18px; --shadow:0 14px 40px rgba(0,0,0,.12);
    }
    *{box-sizing:border-box} html,body{margin:0}
    body{
      font-family:"Space Grotesk",sans-serif; color:var(--ink); line-height:1.6;
      background:radial-gradient(circle at 88% 8%,#ffe7e0 0 17%,transparent 18%),radial-gradient(circle at 10% 84%,#d8fff6 0 16%,transparent 17%),var(--bg);
    }
    .container{width:min(1120px,92%);margin:auto} section{padding:5rem 0}
    h1,h2,h3{line-height:1.1;margin:0 0 1rem} h2{font-size:clamp(1.5rem,3vw,2.5rem)}
    h1{font-family:"Archivo Black",sans-serif;font-size:clamp(2rem,5vw,4rem);letter-spacing:-.03em}
    p{margin:0 0 1rem;color:var(--muted)}
    .hero{min-height:90vh;display:grid;place-items:center;padding:2rem 0 1.5rem}
    .hero-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:2rem;align-items:center}
    .badge{display:inline-block;background:#fff;border:2px solid var(--line);border-radius:999px;font-weight:700;padding:.4rem .85rem;margin-bottom:1rem}
    .cta{display:inline-block;margin-top:.6rem;text-decoration:none;font-weight:700;color:#fff;background:var(--ink);border:2px solid var(--ink);border-radius:12px;padding:.85rem 1.2rem;transition:transform .2s}
    .cta:hover{transform:translateY(-2px)}
    .phone-art{
      width:min(360px,92%);aspect-ratio:10/19;margin:auto;border:3px solid var(--line);border-radius:28px;background:var(--card);
      box-shadow:var(--shadow);position:relative;overflow:hidden;
    }
    .phone-screen{position:absolute;inset:10px;border-radius:20px;background:linear-gradient(160deg,#f2f2f2 0%,#fff 40%,#eef7ff 100%);border:2px solid #dadada}
    .noti{position:absolute;left:50%;transform:translateX(-50%);border:2px solid var(--line);border-radius:999px;background:#fff;padding:.2rem .7rem;font-weight:700;font-size:.9rem;animation:floatUp 3.8s infinite ease-in-out;z-index:2}
    .noti:nth-child(2){bottom:14%;animation-delay:0s}.noti:nth-child(3){bottom:28%;animation-delay:.8s}.noti:nth-child(4){bottom:42%;animation-delay:1.6s}.noti:nth-child(5){bottom:56%;animation-delay:2.4s}
    .mini-cage{position:absolute;bottom:7%;left:8%;width:92px;height:74px;border:3px solid var(--line);border-radius:10px;background:repeating-linear-gradient(90deg,#fff 0 9px,#ededed 9px 12px);z-index:2}
    @keyframes floatUp{0%,100%{transform:translate(-50%,10px);opacity:.2}35%{opacity:1}70%{transform:translate(-50%,-24px);opacity:.75}}

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:1.2rem}
    .card{background:var(--card);border:2px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:1.25rem}
    .mini-title{font-weight:700;margin-bottom:.4rem}
    .buttons{display:flex;gap:.8rem;flex-wrap:wrap;margin:.8rem 0}
    button{border:2px solid var(--line);background:#fff;color:var(--ink);font-weight:700;padding:.75rem 1.05rem;border-radius:12px;cursor:pointer}
    button.primary{background:var(--accent)} button.secondary{background:var(--accent2)} button:disabled{opacity:.55;cursor:not-allowed}
    .sim-box{text-align:center;position:relative;overflow:hidden}
    .hit-flash{animation:flashHit .35s ease}
    @keyframes flashHit{0%{background:#fff4b0}100%{background:transparent}}
    .particle{
      position:absolute;pointer-events:none;font-size:20px;animation:pop 700ms ease forwards;opacity:0;
    }
    @keyframes pop{
      0%{opacity:1;transform:translate(0,0) scale(.6)}
      100%{opacity:0;transform:translate(var(--dx),var(--dy)) scale(1.2)}
    }

    .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:.8rem;text-align:left;margin:.4rem 0 .8rem}
    .stat{background:#f3f3ef;border-radius:12px;padding:.7rem .8rem;border:1px solid #e6e6e0}
    .stat strong{display:block;color:var(--ink);font-size:1.2rem}

    .bars-wrap{margin-top:1rem;display:none}
    .bars{display:grid;gap:.6rem}
    .bar-row{display:grid;grid-template-columns:120px 1fr 52px;gap:.6rem;align-items:center}
    .track{height:14px;background:#ecece7;border-radius:999px;overflow:hidden}
    .fill{height:100%;width:0%;transition:width .7s ease}
    .fill.a{background:var(--accent)} .fill.b{background:var(--accent2)}
    .compare{margin-top:.7rem;font-weight:700;color:#1f1f1f}

    .refresh-box{border:2px dashed #c6c6c6;border-radius:12px;padding:.8rem;background:#fafafa}
    .pull-area{
      user-select:none;touch-action:none;background:#fff;border:2px solid var(--line);border-radius:12px;padding:1rem;
      text-align:center;position:relative;overflow:hidden;
    }
    .spinner{
      width:26px;height:26px;border:3px solid #ddd;border-top:3px solid var(--ink);border-radius:50%;
      margin:.5rem auto;display:none;animation:spin 1s linear infinite;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .fact{margin-top:.6rem;padding:.6rem;border:1px solid #ddd;border-radius:10px;background:#fff}

    .tips{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}
    .tip{display:flex;gap:.7rem;align-items:flex-start;background:#f7f7f7;border:1px solid #e8e8e8;border-radius:12px;padding:.75rem}
    .tip i{font-style:normal;font-size:1.3rem;line-height:1}
    footer{padding:2rem 0 3rem;border-top:2px solid #ddd;text-align:center;color:var(--muted)} footer a{color:var(--ink)}
    .fade-in{opacity:0;transform:translateY(16px);transition:opacity .6s,transform .6s}
    .fade-in.visible{opacity:1;transform:none}
    @media (max-width:900px){.hero-grid,.grid-2,.tips{grid-template-columns:1fr}.stats{grid-template-columns:1fr}section{padding:4rem 0}.bar-row{grid-template-columns:90px 1fr 40px}}
  </style>
</head>
<body>
  <header class="hero container">
    <div class="hero-grid">
      <div>
        <span class="badge">Psicologia + Tech + Te</span>
        <h1>La Gabbia Invisibile: Perch√© non smetti di controllare il telefono?</h1>
        <p>Scopri il meccanismo psicologico dietro notifiche, like e refresh dei social. Dalla Skinner Box al tuo feed: stessa logica, design diverso.</p>
        <a class="cta" href="#inizia">Inizia il Viaggio</a>
      </div>
      <div class="phone-art" aria-hidden="true">
        <div class="phone-screen"></div>
        <div class="noti">+1 Like</div><div class="noti">Nuova Storia</div><div class="noti">3 Notifiche</div><div class="noti">Messaggio</div>
        <div class="mini-cage"></div>
      </div>
    </div>
  </header>

  <main id="inizia" class="container">
    <section class="fade-in">
      <h2>Il Piccione che Amava Vincere: L'Esperimento di Skinner</h2>
      <div class="grid-2">
        <article class="card">
          <p><strong>Condizionamento operante, versione semplice:</strong> quando un comportamento viene premiato, tendiamo a rifarlo.</p>
          <p><strong>Ricompensa fissa:</strong> premio sempre regolare, prevedibile.</p>
          <p><strong>Ricompensa variabile/casuale:</strong> premio imprevedibile. Questa incertezza rende il comportamento pi√π insistente.</p>
        </article>
        <article class="card">
          <div class="mini-title">Mini esperimento visivo</div>
          <p>Due pulsanti per il piccione: uno sempre uguale, uno a sorpresa.</p>
          <div class="buttons">
            <button id="fixed-demo">Pulsante Premio Fisso</button>
            <button id="var-demo">Pulsante Premio Casuale</button>
          </div>
          <p id="bird-log">Il piccione osserva i pulsanti...</p>
        </article>
      </div>
    </section>

    <section class="fade-in">
      <h2>La Skinner Box in Tasca: Come i Social ti ‚ÄúCatturano‚Äù</h2>
      <div class="grid-2">
        <article class="card">
          <p><strong>Parallelismo diretto:</strong> la gabbia √® lo smartphone, ‚Äúbeccare‚Äù √® scrollare o fare refresh, la ricompensa √® la notifica/like/contenuto nuovo.</p>
          <p><strong>Dopamina:</strong> √® anche anticipazione. Se la ricompensa √® incerta, il cervello resta agganciato all‚Äôattesa.</p>
          <p><strong>Esempi:</strong> pull-to-refresh tipo slot machine, storie che scompaiono (FOMO), puntino rosso.</p>
        </article>
        <article class="card">
          <div class="mini-title">Slot Machine Pull-to-Refresh</div>
          <p style="margin-bottom:.6rem">Trascina verso il basso e rilascia per ‚Äúcaricare un nuovo fatto‚Äù. Il ritardo di 1-2 secondi simula l‚Äôattesa intenzionale.</p>
          <div class="refresh-box">
            <div id="pullArea" class="pull-area">
              <strong id="pullLabel">Trascina in basso ‚Üì</strong>
              <div id="spinner" class="spinner"></div>
              <div id="fact" class="fact">Fatto: le ricompense imprevedibili mantengono il comportamento pi√π a lungo.</div>
            </div>
          </div>
          <p style="margin-top:.7rem"><strong>Didattica:</strong> quel micro-ritardo crea suspense: ‚Äúmagari questa volta trovo qualcosa di super interessante‚Äù.</p>
        </article>
      </div>
    </section>

    <section class="fade-in">
      <h2>Prova tu stesso: La Sfida della Ricompensa</h2>
      <article id="simBox" class="card sim-box">
        <p>Hai 60 secondi. <strong>Pulsante A</strong>: 1 stellina ogni 5 secondi (fisso). <strong>Pulsante B</strong>: stelline casuali in tempi imprevedibili (variabile).</p>
        <div class="buttons" style="justify-content:center">
          <button class="primary" id="start">Avvia 1 minuto</button>
          <button id="btn-a" disabled>Pulsante A (Fisso)</button>
          <button class="secondary" id="btn-b" disabled>Pulsante B (Variabile)</button>
        </div>
        <div class="stats">
          <div class="stat">Tempo rimasto<strong id="time">60s</strong></div>
          <div class="stat">Click A / Click B<strong id="clicks">0 / 0</strong></div>
          <div class="stat">Stelline A / B<strong id="stars">0 / 0</strong></div>
        </div>
        <p id="reflection">Premi ‚ÄúAvvia 1 minuto‚Äù per iniziare.</p>

        <div id="barsWrap" class="bars-wrap">
          <div class="bars">
            <div class="bar-row">
              <strong>Pulsante A</strong>
              <div class="track"><div id="barA" class="fill a"></div></div>
              <span id="barALabel">0%</span>
            </div>
            <div class="bar-row">
              <strong>Pulsante B</strong>
              <div class="track"><div id="barB" class="fill b"></div></div>
              <span id="barBLabel">0%</span>
            </div>
          </div>
          <p id="compare" class="compare"></p>
        </div>
      </article>
    </section>

    <section class="fade-in">
      <h2>Fuga dalla Gabbia: Riprendi il Controllo</h2>
      <article class="card">
        <p>Capire il meccanismo √® il primo passo per non esserne schiavi.</p>
        <div class="tips">
          <div class="tip"><i>üîï</i><div><strong>Taglia il rumore</strong><br>Disattiva notifiche non essenziali, soprattutto badge rossi.</div></div>
          <div class="tip"><i>‚è±Ô∏è</i><div><strong>Metti limiti</strong><br>Imposta tempi d‚Äôuso per le app pi√π assorbenti.</div></div>
          <div class="tip"><i>üìµ</i><div><strong>Telefono fuori dalla camera</strong><br>Meno tentazioni, sonno migliore.</div></div>
          <div class="tip"><i>‚ö´‚ö™</i><div><strong>Scala di grigi</strong><br>Meno colori forti, meno trigger visivi.</div></div>
        </div>
      </article>
    </section>
  </main>

  <footer class="container">
    <h3>Questo sito √® stato creato per scopi educativi [Nome della Scuola/Classe].</h3>
    <p>
      Risorse aggiuntive:
      <a href="https://www.thesocialdilemma.com/" target="_blank" rel="noreferrer">The Social Dilemma</a> |
      <a href="https://www.penguinrandomhouse.com/books/533763/irresistible-by-adam-alter/" target="_blank" rel="noreferrer">Irresistible (Adam Alter)</a>
    </p>
  </footer>

  <script>
    // Reveal
    const observer = new IntersectionObserver((entries)=>entries.forEach(e=>e.isIntersecting&&e.target.classList.add("visible")), {threshold:.15});
    document.querySelectorAll(".fade-in").forEach(el=>observer.observe(el));

    // Mini demo Skinner
    const birdLog = document.getElementById("bird-log");
    document.getElementById("fixed-demo").onclick = ()=>birdLog.textContent="Premio fisso: il piccione becca e poi rallenta.";
    document.getElementById("var-demo").onclick = ()=>{
      const outcomes=["Niente... forse al prossimo.","Piccolo premio!","Grande premio!","Ricompensa imprevista!"];
      birdLog.textContent="Premio casuale: "+outcomes[Math.floor(Math.random()*outcomes.length)]+" Il piccione continua a provare.";
    };

    // Pull to refresh simulato
    const pullArea = document.getElementById("pullArea");
    const pullLabel = document.getElementById("pullLabel");
    const spinner = document.getElementById("spinner");
    const factBox = document.getElementById("fact");
    const facts = [
      "Fatto: l'incertezza mantiene il comportamento pi√π a lungo della ricompensa prevedibile.",
      "Fatto: il refresh con attesa crea anticipazione, non solo informazione.",
      "Fatto: le notifiche rosse sfruttano urgenza visiva + ricompensa sociale.",
      "Fatto: ‚Äúforse questa volta‚Äù √® il motore del rinforzo variabile."
    ];
    let startY = null, pulled = 0, loading = false;
    function getY(e){ return e.touches ? e.touches[0].clientY : e.clientY; }
    function begin(e){ if(loading) return; startY=getY(e); pulled=0; }
    function move(e){
      if(startY===null || loading) return;
      pulled=Math.max(0, getY(e)-startY);
      if(pulled>70) pullLabel.textContent="Rilascia per refresh üé∞";
      else if(pulled>10) pullLabel.textContent="Continua a trascinare...";
    }
    function end(){
      if(startY===null || loading) return;
      if(pulled>70){
        loading=true;
        pullLabel.textContent="Caricamento...";
        spinner.style.display="block";
        const delay = 1000 + Math.floor(Math.random()*1000);
        setTimeout(()=>{
          spinner.style.display="none";
          pullLabel.textContent="Nuovo contenuto trovato!";
          factBox.textContent = facts[Math.floor(Math.random()*facts.length)];
          loading=false;
          setTimeout(()=>pullLabel.textContent="Trascina in basso ‚Üì",1200);
        }, delay);
      } else pullLabel.textContent="Trascina in basso ‚Üì";
      startY=null; pulled=0;
    }
    ["mousedown","touchstart"].forEach(evt=>pullArea.addEventListener(evt,begin,{passive:true}));
    ["mousemove","touchmove"].forEach(evt=>pullArea.addEventListener(evt,move,{passive:true}));
    ["mouseup","mouseleave","touchend","touchcancel"].forEach(evt=>pullArea.addEventListener(evt,end,{passive:true}));

    // Simulazione 60s
    const simBox = document.getElementById("simBox");
    const startBtn = document.getElementById("start"), btnA = document.getElementById("btn-a"), btnB = document.getElementById("btn-b");
    const timeEl = document.getElementById("time"), clicksEl = document.getElementById("clicks"), starsEl = document.getElementById("stars"), reflectionEl = document.getElementById("reflection");
    const barsWrap = document.getElementById("barsWrap"), barA = document.getElementById("barA"), barB = document.getElementById("barB"), barALabel = document.getElementById("barALabel"), barBLabel = document.getElementById("barBLabel"), compare = document.getElementById("compare");

    let running=false, remaining=60, clicksA=0, clicksB=0, starsA=0, starsB=0, fixedReady=true, timer=null;
    function updateUI(){timeEl.textContent=remaining+"s"; clicksEl.textContent=clicksA+" / "+clicksB; starsEl.textContent=starsA+" / "+starsB;}

    function burst(x,y){
      const icons=["‚≠ê","üéâ","‚ú®"];
      for(let i=0;i<12;i++){
        const s=document.createElement("span");
        s.className="particle"; s.textContent=icons[Math.floor(Math.random()*icons.length)];
        s.style.left=x+"px"; s.style.top=y+"px";
        s.style.setProperty("--dx",(Math.random()*180-90)+"px");
        s.style.setProperty("--dy",(-40-Math.random()*150)+"px");
        simBox.appendChild(s);
        setTimeout(()=>s.remove(),700);
      }
      simBox.classList.remove("hit-flash");
      void simBox.offsetWidth;
      simBox.classList.add("hit-flash");
    }

    function renderBars(){
      const total = clicksA + clicksB;
      const aPct = total ? Math.round((clicksA/total)*100) : 0;
      const bPct = total ? Math.round((clicksB/total)*100) : 0;
      barA.style.width = aPct+"%"; barB.style.width = bPct+"%";
      barALabel.textContent=aPct+"%"; barBLabel.textContent=bPct+"%";
      barsWrap.style.display="block";

      if(clicksA===0 && clicksB===0){
        compare.textContent="Nessun click registrato.";
      }else if(clicksA===0){
        compare.textContent="Hai cliccato sul pulsante B molto pi√π di A. L'imprevedibilit√† ha guidato il comportamento.";
      }else{
        const more = Math.round(((clicksB-clicksA)/clicksA)*100);
        if(more>0){
          compare.textContent=`Hai cliccato sul pulsante B il ${more}% di volte in pi√π rispetto ad A. Proprio come i piccioni di Skinner, la mente viene catturata dall‚Äôimprevedibilit√†.`;
        }else{
          compare.textContent="Hai preferito A o li hai usati in modo simile. Ottimo confronto: il tuo pattern √® pi√π controllato.";
        }
      }
    }

    function endGame(){
      running=false; btnA.disabled=true; btnB.disabled=true; startBtn.disabled=false;
      const preferred = clicksB>clicksA ? "B (variabile)" : clicksA>clicksB ? "A (fisso)" : "entrambi in modo simile";
      reflectionEl.textContent = "Tempo finito. Hai cliccato di pi√π su "+preferred+".";
      renderBars();
    }

    function startGame(){
      clearInterval(timer);
      running=true; remaining=60; clicksA=clicksB=starsA=starsB=0; fixedReady=true;
      btnA.disabled=false; btnB.disabled=false; startBtn.disabled=true; barsWrap.style.display="none";
      reflectionEl.textContent="Test in corso: osserva dove torna la tua attenzione."; updateUI();
      timer=setInterval(()=>{
        remaining--;
        if(remaining%5===0) fixedReady=true;
        updateUI();
        if(remaining<=0){ clearInterval(timer); endGame(); }
      },1000);
    }

    startBtn.onclick=startGame;
    btnA.onclick=()=>{ if(!running) return; clicksA++; if(fixedReady){starsA+=1; fixedReady=false;} updateUI(); };
    btnB.onclick=(e)=>{
      if(!running) return;
      clicksB++;
      const rewards=[0,10,5,0,3,0,7], win=Math.random()>.45;
      if(win){
        const value = rewards[Math.floor(Math.random()*rewards.length)];
        starsB += value;
        if(value>0){
          const rect = simBox.getBoundingClientRect();
          const b = e.target.getBoundingClientRect();
          burst(b.left - rect.left + b.width/2, b.top - rect.top + b.height/2);
        }
      }
      updateUI();
    };
  </script>
</body>
</html>
